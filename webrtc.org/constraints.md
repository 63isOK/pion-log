# 约束

H5的约束/能力/设置,和webrtc的sdp的offer/answer模型在理念上有很多相似,
在细说约束之前,先聊下额外的话题:sdp的offer/answer.

## sdp的提议/应答模型

我们先思考一下,webrtc的两端,如何协商编码格式.

如果没有sdp,要么两端使用统一的编码格式,要么由业务层先做好协商.
如果是统一的编码格式,对于某个具体的产品来说是可行的,但对于开放标准来说,必须是做到编码无关的,
这里需要思考一个典型的问题:编码格式也在不断向前演进,h264之后有h265,vp8后面有av1.
如果是有业务层来协商,这无异是将皮球丢给了业务层,问题依然存在.

这是一个典型的相互摸不清对方的场景,是不是和tcp的3次握手很像,但这里不是建立可靠连接,
而是协商格式,简单粗暴,同时源自生活:去买水果,问老板,有苹果/梨子/香蕉中的任何一种吗?
老板回答:有梨子/香蕉.此时可以选择买例子或香蕉,因为老板这两种水果都卖.

## 约束/能力/设置

H5中提供api,同样遇到了这种不确定性的问题:不同浏览器对标准的支持程度,不同厂商实现时不同的限制,
如果这些是抛给上层业务去处理,那么上层业务就要对不同浏览器,不同api的实现都要有适配,
而这些适配本就不该是上层业务需要处理的事.

同样H5推出了3个概念来解决这个问题:

- 约束: 请求方希望的限制
- 能力: 服务方能提供的支持
- 设置: 最终协商好的限制,这个限制属于约束的范围,同时也属于能力支持的范围
